<!DOCTYPE html>
<html lang="es">

<head>
    <title>Punto de Venta</title>
    <!-- Bootstrap (Asegúrate de incluirlo si lo usas) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body class="container mt-5">

    <!-- Formulario para escanear el producto -->
    <form id="form-escaneo" class="form-escaneo">
        <div class="row d-flex align-items-center mb-3">
            <p class="col-3 mb-0">Producto:</p>
            <input class="col-6" type="number" name="producto" id="producto" required>
            <button type="submit" class="col-1 btn btn-primary">
                <i class="bi bi-search" style="font-size: 20px;"></i>
            </button>
        </div>

        <div class="row d-flex align-items-center mb-3">
            <p class="col-3 mb-0">Cantidad:</p>
            <input class="col-6" type="number" name="cantidad" id="cantidad" value="1" min="1" required>
        </div>
    </form>

    <!-- Tabla para mostrar los productos -->
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Clave</th>
                <th>Descripción</th>
                <th>Cantidad</th>
                <th>Precio</th>
            </tr>
        </thead>
        <tbody id="productos-body">
            <!-- Aquí se mostrarán los productos -->
        </tbody>
        <tfoot>
            <tr>
                <td colspan="2"></td>
                <td><strong>Total Neto:</strong></td>
                <td id="total-neto">$0.00</td>
            </tr>
        </tfoot>
    </table>

    <script>
        // Simulación de productos (puedes sustituir esto por una consulta a tu backend)
        const productosDB = [
            { id: 101, descripcion: "Producto A", precio: 50 },
            { id: 102, descripcion: "Producto B", precio: 75 },
            { id: 103, descripcion: "Producto C", precio: 120 },
        ];

        // Función para agregar un producto a la tabla
        document.getElementById('form-escaneo').addEventListener('submit', function (e) {
            e.preventDefault();

            const productoInput = document.getElementById('producto');
            const cantidadInput = document.getElementById('cantidad');

            const idProducto = parseInt(productoInput.value);
            const cantidad = parseInt(cantidadInput.value);

            // Buscar el producto en la "base de datos"
            const producto = productosDB.find(p => p.id === idProducto);

            if (producto) {
                agregarProductoATabla(producto, cantidad);
                productoInput.value = '';
                cantidadInput.value = '1';
            } else {
                alert("Producto no encontrado");
            }
        });

        function agregarProductoATabla(producto, cantidad) {
            const tbody = document.getElementById('productos-body');

            // Crear la fila con los datos del producto
            const fila = document.createElement('tr');
            fila.innerHTML = `
                <td>${producto.id}</td>
                <td>${producto.descripcion}</td>
                <td>${cantidad}</td>
                <td>$${(producto.precio * cantidad).toFixed(2)}</td>
            `;

            // Agregar la fila a la tabla
            tbody.appendChild(fila);

            // Actualizar el total
            actualizarTotal(producto.precio * cantidad);
        }

        function actualizarTotal(monto) {
            const totalElemento = document.getElementById('total-neto');
            const totalActual = parseFloat(totalElemento.innerText.replace('$', '')) || 0;
            totalElemento.innerText = `$${(totalActual + monto).toFixed(2)}`;
        }
    </script>

</body>

</html>
